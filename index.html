<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Khal's Zones</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="title-block">
      <h1>What zone am I in?</h1>
      <p class="subtitle">Tap how you feel. Add a note if you want.</p>
    </div>
    <button id="teacherToggle" class="teacher-toggle" aria-pressed="false" aria-expanded="false" aria-controls="teacherPanel">
      👩‍🏫 Teacher View
    </button>
  </header>

  <main>
    <section class="zones" aria-labelledby="zonePickerHeading">
      <h2 id="zonePickerHeading" class="sr-only">Choose a zone</h2>
      <div class="zone-grid">
        <button class="zone-card" data-zone="blue" aria-label="Blue zone, sad or tired">
          <span class="emoji" aria-hidden="true">🟦</span>
          <span class="label">Blue Zone</span>
          <span class="kid-words">Sad · Tired · Slow</span>
        </button>
        <button class="zone-card" data-zone="green" aria-label="Green zone, ready to learn">
          <span class="emoji" aria-hidden="true">🟩</span>
          <span class="label">Green Zone</span>
          <span class="kid-words">Happy · Ready · Calm</span>
        </button>
        <button class="zone-card" data-zone="yellow" aria-label="Yellow zone, worried or excited">
          <span class="emoji" aria-hidden="true">🟨</span>
          <span class="label">Yellow Zone</span>
          <span class="kid-words">Wiggly · Worried · Silly</span>
        </button>
        <button class="zone-card" data-zone="red" aria-label="Red zone, angry or out of control">
          <span class="emoji" aria-hidden="true">🟥</span>
          <span class="label">Red Zone</span>
          <span class="kid-words">Mad · Yelling · Out of Control</span>
        </button>
      </div>
    </section>

    <section class="summary" aria-labelledby="summaryHeading">
      <h2 id="summaryHeading">Today at a glance</h2>
      <div id="todayCounts" class="today-counts" role="list" aria-live="polite"></div>
      <div id="timeline" class="timeline" aria-label="Today entries timeline" role="list"></div>
    </section>

    <section id="teacherPanel" class="teacher-panel teacher-only" aria-labelledby="teacherHeading" tabindex="-1">
      <div class="teacher-panel-header">
        <h2 id="teacherHeading">History &amp; Log</h2>
      </div>

      <form id="filters" class="filters" aria-label="Filter log entries">
        <fieldset>
          <legend>Date range</legend>
          <label>
            <span class="sr-only">Date range</span>
            <select id="dateFilter" name="dateFilter">
              <option value="today">Today</option>
              <option value="week">This week</option>
              <option value="all" selected>All time</option>
              <option value="custom">Custom range</option>
            </select>
          </label>
          <div class="custom-date" id="customDateInputs">
            <label>
              Start
              <input type="date" id="startDate" name="startDate" />
            </label>
            <label>
              End
              <input type="date" id="endDate" name="endDate" />
            </label>
          </div>
        </fieldset>
        <fieldset>
          <legend>Zones</legend>
          <label><input type="checkbox" name="zoneFilter" value="blue" checked /> Blue</label>
          <label><input type="checkbox" name="zoneFilter" value="green" checked /> Green</label>
          <label><input type="checkbox" name="zoneFilter" value="yellow" checked /> Yellow</label>
          <label><input type="checkbox" name="zoneFilter" value="red" checked /> Red</label>
        </fieldset>
      </form>

      <div class="table-actions">
        <button id="exportCsv" type="button">⬇️ Export CSV</button>
        <button id="deleteSelected" type="button">🗑️ Delete selected</button>
        <button id="clearAll" type="button">🚨 Clear all data</button>
      </div>

      <div class="table-wrapper">
        <table aria-describedby="teacherHeading">
          <thead>
            <tr>
              <th scope="col" class="select-col"><span class="sr-only">Select entry</span></th>
              <th scope="col">Date &amp; Time</th>
              <th scope="col">Zone</th>
              <th scope="col">Note</th>
            </tr>
          </thead>
          <tbody id="historyBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <div id="noteModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="noteTitle">
    <div class="modal-content">
      <h2 id="noteTitle">Add a note?</h2>
      <p class="modal-subtitle">Tell us what happened (optional).</p>
      <form id="noteForm">
        <label for="noteText" class="sr-only">Note</label>
        <textarea id="noteText" name="note" rows="3" maxlength="120" placeholder="What happened? (optional)"></textarea>
        <div class="modal-actions">
          <button type="submit" class="primary">Save note</button>
          <button type="button" id="skipNote" class="secondary">Skip</button>
        </div>
      </form>
    </div>
  </div>

  <div id="liveRegion" class="sr-only" aria-live="polite"></div>

  <script src="app.js"></script>
</body>
</html>
